<!DOCTYPE html>
<html lang="en">
<head>
    <title>Settings</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="settings.module.css">
</head>
<body class="body">
<h1>Settings</h1>
<label for="settingsSearch" class="label"></label>
<input type="text" id="settingsSearch" class="input" placeholder="Search settings..." style="margin-bottom:24px;width:100%;max-width:400px;display:block;">
<form id="settingsForm" class="form" enctype="multipart/form-data">

    <div class="category">
        <h2>Channel</h2>
        <label for="channelName" class="label">
            Twitch Channel Name:
            <span class="info-icon" data-tooltip="The Twitch channel to connect to for chat messages and avatars.">ⓘ</span>
        </label>
        <input type="text" id="channelName" name="channelName" class="input" value="ohnepixel">
    </div>

    <div class="category">
        <h2>Avatar Sprites</h2>
        <label for="spriteImage" class="label">
            Upload Sprite Sheets (PNG, JPG):
            <span class="info-icon" data-tooltip="Upload one or more sprite sheets for avatars. Each sprite sheet can be configured individually.">ⓘ</span>
        </label>
        <input type="file" id="spriteImage" name="spriteImage" accept="image/*" class="input" multiple>
        <div style="margin:10px 0;">
            <label for="setAllFrameSpeed" class="label">
                Set All Frame Speed (frames per second):
                <span class="info-icon" data-tooltip="Set the animation speed for all sprites at once. Higher values = faster animation.">ⓘ</span>
            </label>
            <input type="number" id="setAllFrameSpeed" class="input" min="1" max="60" step="1" value="10" style="width:100px;display:inline-block;">
            <button type="button" id="applyAllFrameSpeed" class="button" style="margin-left:8px;">Apply to All</button>
        </div>
        <div id="spriteGallery" style="display:flex;gap:16px;margin:10px 0;flex-wrap:wrap;"></div>
        <div style="margin:10px 0;">
            <button type="button" id="deleteAllSprites" class="button sprite-delete-btn">Delete All Sprites</button>
            <span class="info-icon" data-tooltip="Remove all uploaded sprite sheets.">ⓘ</span>
        </div>
    </div>

    <div class="category">
        <h2>Avatar Appearance</h2>
        <label class="checkbox-label">
            <input type="checkbox" id="useTwitchColor" name="useTwitchColor">
            Use Twitch Color from Twitch API
            <span class="info-icon" data-tooltip="If enabled, avatars will use the color from the user's Twitch profile. Otherwise, the color below is used.">ⓘ</span>
        </label>
        <label for="avatarColor" class="label">
            Avatar Color:
            <span class="info-icon" data-tooltip="Default color for avatars if Twitch color is not used.">ⓘ</span>
        </label>
        <input type="color" id="avatarColor" name="avatarColor">
        <label for="avatarSize" class="label">
            Avatar Size (px):
            <span class="info-icon" data-tooltip="The size of each avatar in pixels.">ⓘ</span>
        </label>
        <input type="number" id="avatarSize" name="avatarSize" class="input" min="16" max="128" step="1">
        <label for="avatarOpacity" class="label">
            Avatar Opacity (0.1 - 1):
            <span class="info-icon" data-tooltip="Transparency of avatars. 1 is fully opaque, 0.1 is mostly transparent.">ⓘ</span>
        </label>
        <input type="number" id="avatarOpacity" name="avatarOpacity" class="input" min="0.1" max="1" step="0.1">
        <label class="checkbox-label">
            <input type="checkbox" id="showShadows" name="showShadows">
            Show Avatar Shadows
            <span class="info-icon" data-tooltip="Display a shadow under each avatar for a 3D effect.">ⓘ</span>
        </label>
    </div>

    <div class="category">
        <h2>Movement</h2>
        <label for="walkingSpeed" class="label">
            Walking Speed: min 0.1 - max 10 (units per second)
            <span class="info-icon" data-tooltip="How fast avatars move horizontally across the screen.">ⓘ</span>
        </label>
        <input type="number" id="walkingSpeed" name="walkingSpeed" class="input" min="0.1" max="10" step="0.1">
        <label for="directionChangeChance" class="label">
            Direction Change Chance (% per second):
            <span class="info-icon" data-tooltip="Chance per second that an avatar will randomly turn around.">ⓘ</span>
        </label>
        <input type="number" id="directionChangeChance" name="directionChangeChance" class="input" min="0" max="100" step="0.1">
    </div>

    <div class="category">
        <h2>Jumping</h2>
        <label class="checkbox-label">
            <input type="checkbox" id="enableJumping" name="enableJumping">
            Enable Jumping
            <span class="info-icon" data-tooltip="Allow avatars to jump randomly.">ⓘ</span>
        </label>
        <label for="jumpChance" class="label">
            Jumps Per Minute: min 0 - max 100
            <span class="info-icon" data-tooltip="How often avatars attempt to jump, in jumps per minute.">ⓘ</span>
        </label>
        <input type="number" id="jumpChance" name="jumpChance" class="input" min="0" max="100" step="0.1">
        <label for="jumpVelocity" class="label">
            Jump Velocity: min 1 - max 100 (units per second)
            <span class="info-icon" data-tooltip="How high avatars jump. Higher values = higher jumps.">ⓘ</span>
        </label>
        <input type="number" id="jumpVelocity" name="jumpVelocity" class="input" min="1" max="100" step="0.1">
        <label for="gravity" class="label">
            Gravity: min 0.1 - max 10 (units per second²)
            <span class="info-icon" data-tooltip="How quickly avatars fall back down after jumping. Higher values = faster falls.">ⓘ</span>
        </label>
        <input type="number" id="gravity" name="gravity" class="input" min="0.1" max="10" step="0.1">
    </div>

    <div class="category">
        <h2>Chat & Display</h2>
        <label for="nameFontSize" class="label">
            Name Font Size (px):
            <span class="info-icon" data-tooltip="Font size for the username displayed above each avatar.">ⓘ</span>
        </label>
        <input type="number" id="nameFontSize" name="nameFontSize" class="input" min="8" max="48" step="1">

        <label for="nameFontFamily" class="label">
            Name Font Family:
            <span class="info-icon" data-tooltip="Font family for the username text.">ⓘ</span>
        </label>
        <select id="nameFontFamily" name="nameFontFamily" class="input">
            <option value="sans-serif">Sans-serif</option>
            <option value="Arial, sans-serif">Arial</option>
            <option value="Verdana, Geneva, sans-serif">Verdana</option>
            <option value="Tahoma, Geneva, sans-serif">Tahoma</option>
            <option value="Trebuchet MS, sans-serif">Trebuchet MS</option>
            <option value="Impact, Charcoal, sans-serif">Impact</option>
            <option value="serif">Serif</option>
            <option value="Times New Roman, serif">Times New Roman</option>
            <option value="Georgia, serif">Georgia</option>
            <option value="Palatino Linotype, Book Antiqua, Palatino, serif">Palatino</option>
            <option value="monospace">Monospace</option>
            <option value="Courier New, monospace">Courier New</option>
            <option value="Lucida Console, Monaco, monospace">Lucida Console</option>
            <option value="Comic Sans MS, cursive, sans-serif">Comic Sans MS</option>
        </select>

        <label for="nameFontWeight" class="label">
            Name Font Weight:
            <span class="info-icon" data-tooltip="Font weight (boldness) for the username text.">ⓘ</span>
        </label>
        <select id="nameFontWeight" name="nameFontWeight" class="input">
            <option value="normal">Normal</option>
            <option value="bold">Bold</option>
            <option value="lighter">Lighter</option>
            <option value="bolder">Bolder</option>
            <option value="100">100</option>
            <option value="200">200</option>
            <option value="300">300</option>
            <option value="400">400</option>
            <option value="500">500</option>
            <option value="600">600</option>
            <option value="700">700</option>
            <option value="800">800</option>
            <option value="900">900</option>
        </select>

        <label for="nameFontStyle" class="label">
            Name Font Style:
            <span class="info-icon" data-tooltip="Font style (normal, italic, oblique) for the username text.">ⓘ</span>
        </label>
        <select id="nameFontStyle" name="nameFontStyle" class="input">
            <option value="normal">Normal</option>
            <option value="italic">Italic</option>
            <option value="oblique">Oblique</option>
        </select>

        <label for="nameStrokeStyle" class="label">
            Name Stroke Color:
            <span class="info-icon" data-tooltip="Outline color for the username text.">ⓘ</span>
        </label>
        <input type="color" id="nameStrokeStyle" name="nameStrokeStyle" class="input">

        <label for="nameLineWidth" class="label">
            Name Stroke Width (px):
            <span class="info-icon" data-tooltip="Outline thickness for the username text.">ⓘ</span>
        </label>
        <input type="number" id="nameLineWidth" name="nameLineWidth" class="input" min="0" max="10" step="1">

        <label class="checkbox-label">
            <input type="checkbox" id="enableMessageDisplay" name="enableMessageDisplay">
            Enable Message Display Above Character
            <span class="info-icon" data-tooltip="Show chat messages above avatars when they appear.">ⓘ</span>
        </label>
        <label for="messageChance" class="label">
            Message Display Chance (%): min 0 - max 100
            <span class="info-icon" data-tooltip="Chance that a chat message will be displayed above an avatar.">ⓘ</span>
        </label>
        <input type="number" id="messageChance" name="messageChance" class="input" min="0" max="100" step="0.1">

        <label for="messageFontFamily" class="label">
            Message Font Family:
            <span class="info-icon" data-tooltip="Font family for chat messages above avatars.">ⓘ</span>
        </label>
        <select id="messageFontFamily" name="messageFontFamily" class="input">
            <option value="sans-serif">Sans-serif</option>
            <option value="Arial, sans-serif">Arial</option>
            <option value="Verdana, Geneva, sans-serif">Verdana</option>
            <option value="Tahoma, Geneva, sans-serif">Tahoma</option>
            <option value="Trebuchet MS, sans-serif">Trebuchet MS</option>
            <option value="Impact, Charcoal, sans-serif">Impact</option>
            <option value="serif">Serif</option>
            <option value="Times New Roman, serif">Times New Roman</option>
            <option value="Georgia, serif">Georgia</option>
            <option value="Palatino Linotype, Book Antiqua, Palatino, serif">Palatino</option>
            <option value="monospace">Monospace</option>
            <option value="Courier New, monospace">Courier New</option>
            <option value="Lucida Console, Monaco, monospace">Lucida Console</option>
            <option value="Comic Sans MS, cursive, sans-serif">Comic Sans MS</option>
        </select>

        <label for="messageFontWeight" class="label">
            Message Font Weight:
            <span class="info-icon" data-tooltip="Font weight for chat messages above avatars.">ⓘ</span>
        </label>
        <select id="messageFontWeight" name="messageFontWeight" class="input">
            <option value="normal">Normal</option>
            <option value="bold">Bold</option>
            <option value="lighter">Lighter</option>
            <option value="bolder">Bolder</option>
            <option value="100">100</option>
            <option value="200">200</option>
            <option value="300">300</option>
            <option value="400">400</option>
            <option value="500">500</option>
            <option value="600">600</option>
            <option value="700">700</option>
            <option value="800">800</option>
            <option value="900">900</option>
        </select>

        <label for="messageFontStyle" class="label">
            Message Font Style:
            <span class="info-icon" data-tooltip="Font style for chat messages above avatars.">ⓘ</span>
        </label>
        <select id="messageFontStyle" name="messageFontStyle" class="input">
            <option value="normal">Normal</option>
            <option value="italic">Italic</option>
            <option value="oblique">Oblique</option>
        </select>

        <label for="messageStrokeStyle" class="label">
            Message Stroke Color:
            <span class="info-icon" data-tooltip="Outline color for chat messages.">ⓘ</span>
        </label>
        <input type="color" id="messageStrokeStyle" name="messageStrokeStyle" class="input">

        <label for="messageLineWidth" class="label">
            Message Stroke Width (px):
            <span class="info-icon" data-tooltip="Outline thickness for chat messages.">ⓘ</span>
        </label>
        <input type="number" id="messageLineWidth" name="messageLineWidth" class="input" min="0" max="10" step="1">

        <label for="messageFillStyle" class="label">
            Message Fill Color:
            <span class="info-icon" data-tooltip="Fill color for chat messages.">ⓘ</span>
        </label>
        <input type="color" id="messageFillStyle" name="messageFillStyle" class="input">

        <label for="messageDisappearTime" class="label">
            Message Disappear Time (seconds):
            <span class="info-icon" data-tooltip="How long chat messages stay visible above avatars.">ⓘ</span>
        </label>
        <input type="number" id="messageDisappearTime" name="messageDisappearTime" class="input" min="1" max="30" step="0.1">
        <label class="checkbox-label">
            <input type="checkbox" id="muteMessages" name="muteMessages">
            Mute Chat Messages
            <span class="info-icon" data-tooltip="If enabled, chat messages will not be shown above avatars.">ⓘ</span>
        </label>
    </div>

    <div class="category">
        <h2>Despawn</h2>
        <label class="checkbox-label">
            <input type="checkbox" id="enableDespawn" name="enableDespawn">
            Enable Avatar Despawn
            <span class="info-icon" data-tooltip="If enabled, avatars will disappear after a set time.">ⓘ</span>
        </label>
        <label for="despawnTime" class="label">
            Despawn Time (seconds):
            <span class="info-icon" data-tooltip="How long (in seconds) avatars stay on screen before despawning.">ⓘ</span>
        </label>
        <input type="number" id="despawnTime" name="despawnTime" class="input" min="1" max="3600" step="1">
    </div>

    <div class="category">
        <h2>Sprite Packs</h2>
        <div id="spritePacks" style="display:flex;gap:12px;flex-wrap:wrap;"></div>
        <div style="margin-top:8px;">
            <button type="button" id="refreshPacksBtn" class="button">Refresh Packs</button>
            <span class="info-icon" data-tooltip="Install pre-made sprite packs (adds sprites to your library).">ⓘ</span>
        </div>
    </div>

    <button type="submit" class="button">Save</button>
</form>
<p><a href="index.html">Back to Main</a></p>

<!-- Sprite Editor Modal -->
<div id="spriteEditorModal" class="sprite-editor-modal">
    <div class="sprite-editor-content">
        <button id="closeSpriteEditor" class="sprite-editor-close">✖</button>
        <h2>Edit Sprite</h2>
        <!-- Increased default size: width/height attributes + inline CSS so clientWidth is large immediately -->
        <canvas id="spriteEditorCanvas" width="900" height="480" style="width:900px;height:480px;" class="sprite-editor-canvas"></canvas>
        <div class="sprite-editor-controls">
            <span id="editorFramesLabel" style="margin-right:12px;">Selected Frames: 0</span>
            <label>Frames X: <input type="number" id="editorFramesX" min="1" max="20" value="6" style="width:60px;"></label>
            <label>Frames Y: <input type="number" id="editorFramesY" min="1" max="20" value="1" style="width:60px;"></label>
            <label>Direction:
                <select id="editorDirection">
                    <option value="horizontal">Horizontal</option>
                    <option value="vertical">Vertical</option>
                </select>
            </label>
            <button id="saveSpriteEdit" class="button">Save</button>
        </div>
        <div class="sprite-editor-hint">
            Drag to select crop area. Adjust <b>Frames X</b> and <b>Frames Y</b> for grid sheets (e.g. 4x4). Animation will play left-to-right, top-to-bottom.
        </div>
    </div>
</div>
<script src="settings.js"></script>
</body>
</html>
